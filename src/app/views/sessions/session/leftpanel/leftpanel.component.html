<h6>

  <span class="lighter">Session: </span>
  <span (click)="renameSessionModal()"> {{sessionData.session.name}}</span>
  <span class="dropdown">
    <button class="btn btn-outline-dark dropdown-menu-button" type="button" id="sessionDropdownMenuButton"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-chevron-circle-down" aria-hidden="true"></i>
      <!--<i class="fa fa-bars" aria-hidden="true"></i>-->

    </button>

    <!--suppress HtmlUnknownTag -->
    <div class="dropdown-menu" aria-labelledby="sessionDropdownMenuButton">
      <a class="dropdown-item" (click)="autoLayout()">Auto layout</a>
      <a class="dropdown-item" (click)="renameSessionModal()">Rename</a>
      <a class="dropdown-item" (click)="notesModal()">Notes</a>
      <a class="dropdown-item" (click)="sharingModal()">Sharing</a>
      <a class="dropdown-item" (click)="duplicateModal()">Duplicate session</a>
      <a class="dropdown-item" (click)="saveSessionFileModal()">Save session file</a>
      <a class="dropdown-item" (click)="removeSessionModal()">Remove</a>
    </div>
  </span>
</h6>

<div class="chipster-highlight full-height-panel">
  <div class="bar pull-right search-div">
    <input id="dataset-search-input" type="text" [(ngModel)]="datasetSearch"
           placeholder="search file" (keyup)="datasetSearchKeyEvent($event)">
    <button class="btn btn-outline-dark clear-search-button" *ngIf="datasetSearch"
            (click)="datasetSearch = null">
      <i class="fa fa-times" aria-hidden="true"></i>
    </button>
  </div>

  <div class="full-height">

    <!-- css uses this id to find the tab-content element-->
    <ngb-tabset id="left-tabs">

      <!-- an element id workflow-panel is generated from this and used in CSS -->
      <ngb-tab id="workflow" title="Workflow">
        <!--suppress HtmlUnknownAttribute -->
        <ng-template ngbTabContent>
          <div class="workflow-dataset-static-panel">
            <div class="add-dataset-button">
              <ch-add-dataset-modal
                [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>
            </div>
          </div>

          <ch-workflow-graph
            [datasetsMap]="sessionData.datasetsMap"
            [jobsMap]="sessionData.jobsMap"
            [modulesMap]="sessionData.modulesMap"
            [datasetSearch]="datasetSearch"
            [defaultScale]="1"
            [enabled]="true"></ch-workflow-graph>
        </ng-template>
      </ngb-tab>

      <!-- an element id datasets-panel is generated from this and used in CSS -->
      <ngb-tab id="datasets" title="Files">
        <!--suppress HtmlUnknownAttribute -->
        <ng-template ngbTabContent class="">
          <div class="workflow-dataset-static-panel">
            <div class="add-dataset-button">
              <ch-add-dataset-modal
                [datasetsMap]="sessionData.datasetsMap"
                [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>
            </div>
          </div>

          <div class="scrollable">
            <div class="list-group">
              <button type="button"
                      class="dataset-list-button list-group-item list-group-item-action"
                      [ngClass]="{active: selectionService.isSelectedDatasetById(dataset.datasetId)}"
                      (click)="toggleDatasetSelection($event, dataset)"
                      *ngFor="let dataset of getDatasetListSorted() | datasetsearch:datasetSearch">
                {{dataset.name}}
                </button>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>

  </div>
