<ch-search-box
  placeholder="Search file"
  (onValueChange)="search($event)"
  (onEnterKey)="searchEnter()"></ch-search-box>

<div class="full-height">

<!-- css uses this id to find the tab-content element-->
<ngb-tabset id="left-tabs">

  <!-- an element id workflow-panel is generated from this and used in CSS -->
  <ngb-tab id="workflow" title="Workflow">
    <!--suppress HtmlUnknownAttribute -->
    <ng-template ngbTabContent>
    <!--<div class="chipster-highlight full-height-panel">-->
      <div class="workflow-dataset-static-panel">
        <div class="add-dataset-button">
          <ch-add-dataset-modal
            [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>
        </div>
      </div>

      <ch-workflow-graph
        [datasetsMap]="sessionData.datasetsMap"
        [jobsMap]="sessionData.jobsMap"
        [modulesMap]="sessionData.modulesMap"
        [datasetSearch]="datasetSearch"
        [defaultScale]="1"
        [enabled]="true"></ch-workflow-graph>
    <!--</div>-->
    </ng-template>
  </ngb-tab>

  <!-- an element id datasets-panel is generated from this and used in CSS -->
  <ngb-tab id="datasets" title="Files">
    <!--suppress HtmlUnknownAttribute -->
    <ng-template ngbTabContent class="">
      <!--<div class="chipster-highlight full-height-panel">-->
      <div class="workflow-dataset-static-panel">
        <div class="add-dataset-button">
          <ch-add-dataset-modal
            [datasetsMap]="sessionData.datasetsMap"
            [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>
        </div>
      </div>

      <div class="scrollable">
        <div class="list-group dataset-list list-group-sm">
          <button type="button"
                  class="dataset-list-button list-group-item list-group-item-action"
                  [ngClass]="{active: selectionService.isSelectedDatasetById(dataset.datasetId)}"
                  (click)="toggleDatasetSelection($event, dataset)"
                  *ngFor="let dataset of getDatasetListSorted() | datasetsearch:datasetSearch">
            {{dataset.name}}
            </button>
          </div>
        </div>
      <!--</div>-->
      </ng-template>
    </ngb-tab>
  </ngb-tabset>
</div>

