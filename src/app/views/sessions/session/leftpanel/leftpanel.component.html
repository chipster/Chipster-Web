<ch-search-box placeholder="Search file" (onValueChange)="search($event)" (onEnterKey)="searchEnter()"></ch-search-box>

<div class="full-height">

  <!-- css uses this id to find the tab-content element-->
  <ngb-tabset id="left-tabs">

    <!-- an element id workflow-panel is generated from this and used in CSS -->
    <ngb-tab id="workflow" title="Workflow">
      <!--suppress HtmlUnknownAttribute -->
      <ng-template ngbTabContent>
        <div id="workflow-panel" class="">

          <div class="mt-3 mb-1 ml-1 mr-1">
            <ch-add-dataset-modal [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>

            <button *ngIf="sessionData.datasetsMap.size > 0" class="btn btn-secondary btn-sm pull-right tool-bar-button" title="Reset view"
              (click)="workflowGraph.resetZoomAndScroll()">
              <span class="fa fa-lg fa-undo"></span>
            </button>
            <button *ngIf="sessionData.datasetsMap.size > 0" class="btn btn-secondary btn-sm mr-2 pull-right tool-bar-button" title="Zoom out"
              (click)="workflowGraph.zoomOut()">
              <span class="fa fa-lg fa-search-minus"></span>
            </button>
            <button *ngIf="sessionData.datasetsMap.size > 0" class="btn btn-secondary btn-sm mr-1 pull-right tool-bar-button" title="Zoom in"
              (click)="workflowGraph.zoomIn()">
              <span class=" fa fa-lg fa-search-plus "></span>
            </button>
          </div>

          <ch-workflow-graph #workflowGraph [datasetsMap]="getCompleteDatasets() " [jobsMap]="sessionData.jobsMap
              " [modulesMap]="sessionData.modulesMap " [datasetSearch]="datasetSearch " [defaultScale]="1 " [enabled]="true "></ch-workflow-graph>
        </div>
      </ng-template>
    </ngb-tab>

    <!-- an element id datasets-panel is generated from this and used in CSS -->
    <ngb-tab id="datasets " title="Files ">
      <!--suppress HtmlUnknownAttribute -->
      <ng-template ngbTabContent>
        <div class="full-height-panel">
          <div class="mt-3 ml-1">
            <ch-add-dataset-modal [sessionId]="sessionDataService.getSessionId()"></ch-add-dataset-modal>
          </div>

          <div class="scrollable ">
            <div class="list-group dataset-list list-group-sm ">
              <button type="button " class="dataset-list-button list-group-item list-group-item-action " [ngClass]="{active:
              selectionService.isSelectedDatasetById(dataset.datasetId)} " (click)="toggleDatasetSelection($event, dataset) "
                *ngFor="let dataset of getDatasetListSorted() | datasetsearch:datasetSearch ">
                {{dataset.name}}
              </button>
            </div>
          </div>
        </div>
      </ng-template>
    </ngb-tab>
  </ngb-tabset>
</div>