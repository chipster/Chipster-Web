<div class="container">
  <div class="row">
    <div class="col text-center">
      <span *ngIf="showWarning">
        <i class="fas fa-fw fa-exclamation-circle text-warning"></i>

        <span class="text-warning" style="font-style: italic">{{
          warningText
          }}</span>
      </span>

      <button class="btn btn-xs float-right p-0" (click)="closeDropDownDialog()">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
  <h3 class="h3-xs mt-1 mb-2">Parameters</h3>

  <form name="paramForm" *ngIf="tool">
    <!--
      <div *ngIf="tool.parameters.length === 0" class="font-italic text-smaller">
        No parameters.
      </div>
    -->
    <table class="table table-sm table-hover" *ngIf="tool.parameters.length > 0">
      <!-- <thead class="thead-default"> -->
      <!-- <tr> -->
      <!-- <th>Name</th> -->
      <!-- <th>Value</th> -->
      <!-- <th></th> -->
      <!-- </tr> -->
      <!-- </thead> -->
      <tbody>
        <tr *ngFor="let parameter of tool.parameters; let i = index" ngbPopover="{{parameter.description}}" triggers="mouseenter:mouseleave"
          placement="left" container="body">
          <td>
            {{ getDisplayName(parameter) }}
            <span class="text-sm lighter" *ngIf="parameter.optional">
              <i>(optional)</i>
            </span>
          </td>

          <td>
            <span>
              <!--
                [(ngModel)]="toolSelectionService.parameterValues[tool.name.id][parameter.name.id]"
              -->
              <select *ngIf="toolService.isSelectionParameter(parameter)" name="parameter_{{i}}" [(ngModel)]="parameter.value"
                (ngModelChange)="toolSelectionService.checkParameters()">
                <!-- required="!parameter.optional" -->
                <option *ngFor="let option of parameter.selectionOptions" value="{{option.id}}">
                  {{ option.displayName || option.id }}
                  <span *ngIf="toolService.isDefaultValue(parameter, option.id)">
                    (default)</span>
                </option>
              </select>

              <input *ngIf="toolService.isNumberParameter(parameter)" type="number" [(ngModel)]="parameter.value" name="parameter_{{i}}"
                min="{{parameter.from}}" max="{{parameter.to}}" step="{{toolService.getStepSize(parameter)}}" required="{{!parameter.optional}}"
                (ngModelChange)="toolSelectionService.checkParameters()" />

              <input *ngIf="toolService.isStringParameter(parameter)" type="text" name="parameter_{{i}}" [(ngModel)]="parameter.value"
                required="{{!parameter.optional}}" (ngModelChange)="toolSelectionService.checkParameters()" />

              <!-- <label class="label label-warning" -->
              <!--
                [ngClass]="{'visibility-hidden': !paramForm['parameter_{{index}}'].$error.required}">Required
              -->
              <!-- value</label> -->
              <!-- <label class="label label-warning" -->
              <!--
                [ngClass]="{'visibility-hidden': !paramForm['parameter_{{index}}'].$error.min}">Min
              -->
              <!-- value: {{parameter.from}}</label> -->
              <!-- <label class="label label-warning" -->
              <!--
                [ngClass]="{'visibility-hidden': !paramForm['parameter_{{index}}'].$error.max}">Max
              -->
              <!-- value: {{parameter.to}}</label> -->
            </span>
          </td>

          <!-- reset parameter to default button -->
          <td>
            <button type="button" class="btn btn-secondary btn-sm" *ngIf="parameter.value !== toolService.getDefaultValue(parameter)"
              (click)="reset(parameter, $event)" title="Reset to default value">
              Reset to default
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>