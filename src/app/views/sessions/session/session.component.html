
<div *ngIf="!sessionData" class="container-fluid">
  <p>Loading session...</p>
</div>
<div *ngIf="sessionData">

  <!--suppress HtmlUnknownAttribute -->
  <vertical-split-pane
    primary-component-initialratio="0.33"
    primary-component-minsize="370"
    secondary-component-minsize="300"
    separator-thickness="10"
    id="session-split"
    class="session-view container-fluid">

    <div class="split-pane-content-primary full-height">
      <!-- flex layout arranges space for the undo box when necessary -->
      <div class="d-flex flex-column full-height">
        <div class="full-height">

          <ch-leftpanel [sessionData]="sessionData" class="full-height"></ch-leftpanel>
        </div>
        <div>

          <div *ngIf="deletedDatasets" class="alert alert-info">

            <span *ngIf="deletedDatasets.length === 1">File {{deletedDatasets[0].name}} is being deleted </span>
            <span *ngIf="deletedDatasets.length !== 1">{{deletedDatasets.length}} files are being deleted</span>
            <br>
            <button type="button" class="btn btn-danger btn-sm"
                    (click)="deleteDatasetsNow()"><i class="fa fa-times"></i> Remove</button>
            <button class="btn btn-info btn-sm float-right" (click)="deleteDatasetsUndo()"><i class="fa fa-undo"></i> Undo</button>
          </div>
        </div>
      </div>
    </div>

    <div class="split-pane-content-secondary scrollable">

      <div class="row">
        <div class="col">
          <ch-toolbox [sessionData]="sessionData"></ch-toolbox>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <ch-job *ngIf="selectionService.selectedJobs.length > 0"></ch-job>

          <ch-file
            *ngIf="selectionService.selectedDatasets.length > 0"
            [dataset]="selectionService.selectedDatasets[0]"
            [jobs]="sessionData.jobsMap"
            [sessionData]="sessionData"
            (onDelete)="deleteDatasetsLater()"></ch-file>
        </div>
      </div>

    </div>
  </vertical-split-pane>
</div>

