<div *ngIf="!sessionData" class="container-fluid">
  <p>{{statusText}}</p>
</div>
<div *ngIf="sessionData" class="session-view container-fluid">

  <split>

    <!-- split 1 -->
    <split-area [size]="split1Size" class="split-1 d-flex flex-column">

      <!-- workflow and files -->
      <ch-session-panel [sessionData]="sessionData" (deleteDatasetsNow)="deleteDatasetsNow()" (deleteDatasetsUndo)="deleteDatasetsUndo()"
        (deleteStart)="deleteDatasetsLater()" class="d-flex flex-column flex-grow-1"></ch-session-panel>

    </split-area>


    <!-- split 2-->
    <split-area [size]="split2Size" class="split-2 scrollable">
      <div *ngIf="!split3Visible; else selectionPanel">

        <div class="row">
          <div class="col">
            <ch-tools [sessionData]="sessionData"></ch-tools>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <!-- TODO refactor logic choosing whether to show job or file or session info -->

            <ch-job *ngIf="selectionService.selectedJobs.length > 0" [sessionData]="sessionData">
            </ch-job>

            <ch-session-details *ngIf="selectionService.selectedDatasets.length < 1 && !(selectionService.selectedJobs.length > 0)" [session]="sessionData.session"
              [sessionData]="sessionData">
            </ch-session-details>

            <ch-file *ngIf="selectionService.selectedDatasets.length > 0 && !(selectionService.selectedJobs.length > 0)" [dataset]="selectionService.selectedDatasets[0]"
              [jobs]="sessionData.jobsMap" [sessionData]="sessionData" (onDelete)="deleteDatasetsLater()"></ch-file>
          </div>
        </div>
      </div>

      <ng-template #selectionPanel>
        <ch-selection-panel [sessionData]="sessionData"></ch-selection-panel>
      </ng-template>

    </split-area>


    <!-- split 3-->
    <split-area *ngIf="split3Visible" [size]="split3Size" class="split-3 scrollable">
      <div class="row">
        <div class="col">
          <!-- <ch-tools [sessionData]="sessionData"></ch-tools> -->
          <ch-tool-list-accordion [sessionData]="sessionData "></ch-tool-list-accordion>
        </div>
      </div>
    </split-area>



  </split>
</div>