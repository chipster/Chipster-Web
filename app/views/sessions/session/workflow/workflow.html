
<h4><span ng-click="openSessionEditModal()">Session - {{vm.getSession().name}}</span></h4>

<div class="chipster-highlight">
    <div class="bar pull-right search-div">
        <input id="dataset-search-input" type="text" ng-model="vm.datasetSearch"
               placeholder="search dataset" ng-keyup="vm.datasetSearchKeyEvent($event)">
        <button class="clear-search-button no-border" ng-show="vm.datasetSearch"
                ng-click="vm.datasetSearch = null">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
    </div>

    <div>

        <uib-tabset>

            <uib-tab index="0" heading="Workflow">

                <div class="workflow-dataset-static-panel">
                    <div class="add-dataset-button">
                        <button class="btn btn-sm btn-success link-btn"
                                ng-click="vm.openAddDatasetModal()">
                            <span class="glyphicon glyphicon-plus"></span>
                            Add dataset
                        </button>
                    </div>
                </div>

                <div class="fill workflow-dataset-panel">
                    <workflow-graph
                            datasets-map="vm.getDatasetsMap()"
                            jobs-map="vm.getJobsMap()"
                            modules-map="vm.getModulesMap()"
                            selected-datasets="vm.getSelectedDatasets()"
                            selected-jobs="vm.getSelectedJobs()"
                            dataset-search="vm.datasetSearch"
                            callback="vm.getWorkflowCallback()"
                            zoom="1"
                            enabled="true"></workflow-graph>
                </div>
            </uib-tab>

            <uib-tab index="1" heading="Datasets">

                <div class="workflow-dataset-static-panel">
                    <div class="add-dataset-button">
                        <button class="btn btn-sm btn-success link-btn"
                                ng-click="vm.openAddDatasetModal()">
                            <span class="glyphicon glyphicon-plus"></span>
                            Add dataset
                        </button>
                    </div>
                </div>

                <div id="dataset-list" class="list-group workflow-dataset-panel" data-toggle="buttons">
                    <button type="button" class="list-group-item thin-list-group-item" ng-class="{active:vm.isSelectedDataset(data)}"
                            ng-click="vm.toggleDatasetSelection($event, data)"
                            ng-repeat="data in vm.getDatasetList() | searchDatasetFilter:vm.datasetSearch">
                        {{data.name}}
                    </button>
                </div>

            </uib-tab>

            <uib-tab index="2" heading="Details">
                <textarea id="session-notes" rows="15" placeholder="Session notes"
                          ng-blur="vm.updateSession()"
                          ng-model="vm.getSession().notes">
                </textarea>
            </uib-tab>

        </uib-tabset>
    </div>

</div>